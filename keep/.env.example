# Keep 环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改配置值

# ==================== 认证配置 ====================
# 认证类型: DB (数据库认证), NO_AUTH (无认证), MULTI_TENANT (多租户)
AUTH_TYPE=DB

# ==================== 服务配置 ====================
# API 服务端口
PORT=8080

# Keep API URL (用于内部调用)
KEEP_API_URL=http://localhost:8080

# ==================== 密钥管理 ====================
# 密钥管理器类型: FILE (文件), GCP_SECRET_MANAGER (GCP), AWS_SECRET_MANAGER (AWS)
SECRET_MANAGER_TYPE=FILE
SECRET_MANAGER_DIRECTORY=./state

# JWT 密钥 (生产环境请使用强随机密钥)
KEEP_JWT_SECRET=verysecretkey

# 默认用户凭据 (仅用于 AUTH_TYPE=DB)
KEEP_DEFAULT_USERNAME=keep
KEEP_DEFAULT_PASSWORD=keep

# ==================== 数据库配置 ====================
# 数据库连接字符串
# PostgreSQL: postgresql://user:password@host:port/database
# SQLite: sqlite:////path/to/db.sqlite3?check_same_thread=False
DATABASE_CONNECTION_STRING=postgresql://keep:keep@localhost:5432/keep

# 数据库连接池大小
DATABASE_POOL_SIZE=10

# ==================== AI 配置 ====================
# OpenAI API 配置
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL_NAME=gpt-4

# ==================== WebSocket/Pusher 配置 ====================
# Pusher 应用配置
PUSHER_APP_ID=1
PUSHER_APP_KEY=keepappkey
PUSHER_APP_SECRET=keepappsecret
PUSHER_HOST=localhost
PUSHER_PORT=6001

# ==================== 其他服务配置 ====================
# 是否使用 ngrok (用于开发测试)
USE_NGROK=false

# ==================== Redis 配置 ====================
# 是否启用 Redis (用于任务队列和缓存)
REDIS=true
REDIS_HOST=localhost
REDIS_PORT=6379

# ==================== Prometheus 监控 ====================
# Prometheus 多进程目录
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus

# 是否启用 Keep 指标
KEEP_METRICS=true

# 是否存储 Provider 日志
KEEP_STORE_PROVIDER_LOGS=true

# ==================== OpenTelemetry 配置 ====================
# OTEL 服务名称
OTEL_SERVICE_NAME=keephq

# OTLP 端点
OTLP_ENDPOINT=http://localhost:4317

# 是否启用指标 OTEL
METRIC_OTEL_ENABLED=true

# ==================== Elasticsearch 配置 ====================
# 是否启用 Elasticsearch
ELASTIC_ENABLED=true

# Elasticsearch 主机地址 (多个地址用逗号分隔)
ELASTIC_HOSTS=http://localhost:9200

# Elasticsearch 用户名
ELASTIC_USER=elastic

# Elasticsearch 密码
ELASTIC_PASSWORD=elastic

# Elasticsearch 索引后缀
ELASTIC_INDEX_SUFFIX=poc

# 是否验证 Elasticsearch 证书
ELASTIC_VERIFY_CERTS=false

# Elasticsearch 刷新策略
ELASTIC_REFRESH_STRATEGY=true
